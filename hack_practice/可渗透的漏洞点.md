## 渗透流程

1、先尝试通过服务器拿权限。可通过 nmap、goby 等工具进行目标服务器信息收集，开了哪些远程访问端口，比如 windows 3389端口远程连接桌面、ftp、ssh 等。

2、再通过站点 web 进一步找寻漏洞。

## 信息收集

### 1、搜索引擎搜索

Google hack

数据库注入搜索示例：inurl:.php?id=  ，搜索网址中有"php?id"的网页

目录遍历：intitle: index of

### 2、子域名搜索 ？ 

可以通过攻击同一个 IP 下的其它网站，进而获取所有网站权限

### 3、目标主机扫描

nmap、goby 等工具扫描目标主机，收集主机信息。

### 4、常见的服务器+脚本组合

a、php + apache + mysql

b、asp + iis + access、mssql

c、aspx + iis + mssql

d、jsp + tomcat + oracle、db2

## 漏洞查找利用

### 1、文件上传漏洞

寻找网站中可上传文件或图片的站点，通过各种方式（文件上传漏洞pdf中有介绍）绕过限制上传 webshell，从而登陆网站服务器。

### 2、SQL 注入漏洞 + 扫描站点后台管理登录页面

通过 sqlmap 验证站点是否存在数据库注入漏洞，如果能把数据库扒下来获取到用户名和登录密码，再通过 dirsearch 脚本去扫描站点目录，登录后台管理页面。可进一步看是否存在文件上传漏洞，上传 webshell。

### 3、模版注入漏洞

比如 http://111.200.241.244:55855/{{1+1}}，在链接某处加上{{1+1}}后访问报错，**URL http://111.200.241.244:55855/2 not found**，说明服务端存在模版注入漏洞，可用 tplmap 脚本去扫描并登录到该站点。

### 4、存储型 XSS 漏洞

存储型XSS(持久型XSS)即攻击者将带有XSS攻击的链接放在网页的某个页面，例如评论框等; 用户访问此XSS链接并执行，由于存储型XSS能够攻击所有访问此页面的用户，所以危害非常大。

可手动输入 `<script>alert('yangge')</script>` 来验证是否存在该漏洞。然后在 kali 中用 **beef** 工具来挟持、钓鱼目标机器。

### 5、Thinkphp v5 rce 漏洞

可通过该漏洞生成 webshell 文件，具体看文档《thinkphpv5漏洞.pdf》。

### 6、BurpSuite 弱口令爆破

先通过 google、dirsearch 扫描网站后台管理页面，然后用 admin（一般都会有该登录名） 用户名通过 BurpSuite 爆破弱密码登录

### 7、IIS Put 漏洞上传 shell

### 8、SSH 爆破

先通过 nmap 扫描到目标主机的 ssh 登录端口，尝试用弱密码登录试试
